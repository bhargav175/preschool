@(localUser:User,forumThread:models.Forum.ForumThread)
@import views.html.helper.form
@import models.Forum._
@import views.html.templates._

    @scripts={
        <script src='@routes.Assets.at("js/jquery.hotkeys.js")'></script>
        <script src='@routes.Assets.at("js/google-prettify/prettify.js")'></script>
        <script src='@routes.Assets.at("js/bootstrap-wysiwyg.js")'></script>
        <script src='@routes.Assets.at("js/angular.js")'></script>
        <script src='@routes.Assets.at("js/angular-route.min.js")'></script>
        <script src='@routes.Assets.at("js/angular-sanitize.min.js")'></script>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
        <script src='@routes.Assets.at("js/ui-bootstrap-tpls-0.11.0.min.js")'></script>


        <script src='@routes.Assets.at("js/restangular.js")'></script>
        <script src='@routes.Assets.at("js/angular-file-upload.min.js")'></script>

        <script src='@routes.Assets.at("js/angularapps/user_profile.js")'></script>

        <script src='@routes.Assets.at("js/angularapps/forum.js")'></script>

    }
    @scriptsTop={

    }
    @links={
        <link rel="apple-touch-icon" href="//mindmup.s3.amazonaws.com/lib/img/apple-touch-icon.png" />
        <link rel="shortcut icon" href="http://mindmup.s3.amazonaws.com/lib/img/favicon.ico" >
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" href='@routes.Assets.at("css/bootstrap-wysiwyg.css")'>
        <link rel="stylesheet" href='@routes.Assets.at("css/google-prettify/prettify.css")'>
    }
@template_user_dashboard_semantic_new(Messages("playauthenticate.navigation.home"), "home",scriptsTop,scripts,links) {
<div ng-app="forum">
    <div class="well whiteWell capitalize clearfix" ng-controller="addAnswerController" ng-init="init()">
        <div class="col-md-1 clearfix likeBox" ng-controller="likeThreadController">
            <p class="forumThreadLikesCount"><span class="badge">@forumThread.threadLikes.size()</span></p><p   class="likeThread">
            <i ng-hide="isLiked" class="fa fa-heart-o fa-fw" ng-click="doLikeThread()"></i>
            <i ng-show="isLiked" style="color:pink;" class="fa fa-heart fa-fw" ng-click="doLikeThread()"></i></p>
            <input type="hidden" id="forumThreadSlug" value="@forumThread.slug">
        </div>
        <div class="col-md-11 clearfix">
    <h1 class="page-header">@forumThread.title</h1>
    <p>@forumThread.text</p>

    <hr>
    <p>
        @for(tag<-forumThread.tags){
            <span class="badge">@tag.name</span>
        }
    </p>
        <hr>
        <div class="form-group">
        <a class="btn btn-primary" ng-hide="addAnswerForm" ng-click="toggleAddAnswerForm()"> Add Answer</a>
        @if(localUser!=null){
            @if(forumThread.createdBy.equals(localUser)){
                <a class="btn btn-warning pull-right" href="@controllers.Forum.routes.Forum.editForumThread(forumThread.slug)"> Edit Question</a>

            }
        }
        </div>

        <div ng-show="addAnswerForm">
        @form(action = controllers.Forum.routes.Forum.saveAnswer(), args = 'id -> "addAnswerForm"){
            <div class="form-group">
            <textarea class="form-control" rows="3" placeholder="Answer Content" name="text"></textarea>
            </div>
            <input type="hidden" value="@forumThread.slug" name="questionSlug"/>
            <div class="form-group"><button class="btn btn-success" type="submit">Submit</button>
            <button class="btn btn-warning" type="reset" ng-click="toggleAddAnswerForm()">Cancel</button>
                </div>
        }
        </div>
        </div>
    </div>
        <div class="">
        <ul class="list-group" ng-controller="likeAnswerController">
        @for((forumAnswer,i)<-forumThread.answers.zipWithIndex){
            <li class="list-group-item capitalize clearfix forumAnswerListItem" id="answer@forumAnswer.id">
                <input type="hidden" class="answerSlug" value="@forumAnswer.slug">
                <div class="col-md-1 clearfix"><p class="forumAnswerLikesCount"><span class="badge">@forumAnswer.answerLikes.size()</span></p><p class="likeAnswer" >
                    <i class="fa fa-heart-o fa-fw notLiked" ng-click="doLikeAnswer($event)" style="display:none"></i>
                    <i style="color:pink" class="fa fa-heart fa-fw liked" ng-click="doLikeAnswer($event)"  style="display:none"></i></p> </div>
                <div class="col-md-11 clearfix" >@forumAnswer.text
            @if(forumAnswer.createdBy.equals(localUser)){
                <hr>
               <p> <a href="@controllers.Forum.routes.Forum.editAnswerThread(forumAnswer.slug)">Edit</a></p>
            }
                    <hr>
                    <span class="capitalize"><a class="label label-info" href="@routes.Application.profile(forumAnswer.createdBy.name)">@forumAnswer.createdBy.name</a></span>
                </div>
            </li>

    }
        </ul>


    </div>
</div>

}