@(user:User)

@import be.objectify.deadbolt.java.views.html._

<div class="jumbotron">

<div class="userInfoCard" ng-controller="userProfilePageController">
    <h1 id="profile-user-name">@user.name</h1>
    <p class="label label-info">@user.score</p>
    @subjectPresentOr(){

<hr>
        <legend> <a data-toggle="modal" data-target="#favoriteTagsModal">Favorite Tags</a></legend>
        <p>@for(tag<-user.favoriteTags){
            @if(user.favoriteTags.indexOf(tag)<5){
                <a href="@routes.Application.tag(tag.slug)" class="badge">@tag.name</a>
            }

        }</p>


            <!--Tag modal-->

        <div class="modal fade" id="favoriteTagsModal" tabindex="-1" role="dialog" aria-labelledby="favoriteTagsModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="favoriteTagsModalLabel">Favorite Tags</h4>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group">

                        @for(tag<-user.favoriteTags){
                            <li class="list-group-item"><a href="@routes.Application.tag(tag.slug)"><span class="capitalize">@tag.name</span></a></li>

                        }
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Okay</button>

                    </div>
                </div>
            </div>
        </div>


        <hr>
         <legend> <a data-toggle="modal" data-target="#followerModal">Followers</a></legend>
        <p>@user.followers.size()</p>
            <!--Follower modal-->

        <div class="modal fade" id="followerModal" tabindex="-1" role="dialog" aria-labelledby="followersModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="followersModalLabel">Followers</h4>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group">

                    @for(follower<-user.followers){
                        <li class="list-group-item"><span class="capitalize">@follower.name</span></li>

                        }
                            </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Okay</button>

                    </div>
                </div>
            </div>
        </div>

            <!-- -->
        <hr>
        <legend> <a data-toggle="modal" data-target="#followingModal">
            Following</a></legend>
        <p>@user.following.size()</p>


        <!--Foloowing modal-->

        <div class="modal fade" id="followingModal" tabindex="-1" role="dialog" aria-labelledby="followingModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="followingModalLabel">Following</h4>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group">



                        @for(following<-user.following){
                            <li class="list-group-item"><span class="capitalize">@following.name</span></li>

                        }
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Okay</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- -->



    @defining(Application.getLocalUser(session())) { localUser =>
        @if(localUser.equals(user)){

        }else{
            <hr>

            <p ng-hide="following"><button class="btn btn-primary" id="follow_button" ng-click="followUser()" >Follow <i class="fa fa-plus"></i></button></p>

            <p ng-show="following"><button class="btn btn-default" id="unfollow_button" ng-click="unfollowUser()" >UnFollow <i class="fa fa-minus"></i></button></p>
        }
    }
    }{

    }
</div>
</div>